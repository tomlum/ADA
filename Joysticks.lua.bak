--STEPPING UP ANIMATION IF CLIMBING, SO THAT YOU CAN GET UP EVEN IF JUST AT FEET NARROWLY MISS IT

--setvibration is in attack, currently commented out

--341a000000000000005f7000000000000



me.leftdeadzone = false
you.leftdeadzone = false

love.joystick.setGamepadMapping("341a00000000000005f7000000000000", "start", "button", 10)
love.joystick.setGamepadMapping("341a00000000000005f7000000000000", "leftx", "axis", 1)
love.joystick.setGamepadMapping("341a00000000000005f7000000000000", "lefty", "axis", 2)
love.joystick.setGamepadMapping("341a00000000000005f7000000000000", "rightx", "axis", 6)
love.joystick.setGamepadMapping("341a00000000000005f7000000000000", "righty", "axis", 3)
love.joystick.setGamepadMapping("341a00000000000005f7000000000000", "leftstick", "button", 5)
love.joystick.setGamepadMapping("341a00000000000005f7000000000000", "rightstick", "button", 6)
 
    --8 z
  
    --10 start
  
    --13 dup
    --14 dpright
    --15 dpdown
    --16 dplet
    -- 1 x
    -- 2 a
    --3 b
    --4 y

    --5 left bumper
    --6 right bumper

    --?? 7, 9, 11, 12


    
    ns1 = false
    ns2 = false
    ns12 = false
    ns22 = false

    clickclick = false


function c1accept()    
    if (me.a1 or me.a2 or me.a3 or me.a4 or me.block or me.start) then
        return true
    else return false
    end
end    

function c2accept()    
    if (you.a1 or you.a2 or you.a3 or you.a4 or you.block or you.start) then
        return true
    else return false
    end
end    

function clicks()

    if MENU == "choose" and (me.block or you.block) then
        backtimer = backtimer + 1
        if backtimer > 50 then backtostage() 
        end
    else backtimer = 0
    end

    if MENU ~= "play" then


    
    if ns1 and (me.a1 or me.a2 or me.a3 or me.a4 or me.block or me.start) then
        me.a1 = false
        me.a2 = false
        me.a3 = false
        me.a4 = false
        me.block = false
        me.start = false
    elseif (me.a1 or me.a2 or me.a3 or me.a4 or me.block or me.start) then
        ns1 = true
    else ns1 = false
    end

    if ns2 and (you.a1 or you.a2 or you.a3 or you.a4 or you.block or you.start) then
        you.a1 = false
        you.a2 = false
        you.a3 = false
        you.a4 = false
        you.block = false
        you.start = false
    elseif (you.a1 or you.a2 or you.a3 or you.a4 or you.block or you.start) then
        ns2 = true
    else ns2 = false
    end

     if ns22 and (you.left or you.right or you.up or you.down) then
        you.up = false
        you.down = false
        you.left = false
        you.right = false
    elseif (you.left or you.right or you.up or you.down) then
        ns22 = true
    else ns22 = false
    end

     if ns12 and (me.left or me.right or me.up or me.down) then
        me.up = false
        me.down = false
        me.left = false
        me.right = false
    elseif (me.left or me.right or me.up or me.down) then
        ns12 = true
    else ns12 = false
    end



end
end


you.gupv = 0
me.gupv = 0
you.gv = boltspeed
me.gv = boltspeed




function joystickss(xx,jj)
stupid = 1
xx.gupv = 0
xx.gv = boltspeed



if not joystick then stupid = 2
else

if not justone then

    if jj:isGamepadDown("dpleft") then
       you.left = true
    elseif jj:isGamepadDown("dpright") then
        you.right = true
    end

    if jj:isGamepadDown("dpup") then
       you.up = true
    elseif jj:isGamepadDown("dpdown") then
        you.down = true
    end
 
    if jj:isGamepadDown("a") then
        you.up = true
    end

    if jj:isGamepadDown("x") then
        you.a1 = true
    end

    if jj:isGamepadDown("leftshoulder") then
        you.a2 = true
    end

    if jj:isGamepadDown("rightshoulder") then
        you.a3 = true
    end 

    if jj:isGamepadDown("rightstick") then
        you.block = true
    end 
    
    if jj:isGamepadDown("leftstick") then
        you.run = true
    end 
      if jj:isGamepadDown("start") then
        you.start = true
    end 


    if jj:getGamepadAxis("leftx") < -.4 then
        you.left = true
    elseif 
         jj:getGamepadAxis("leftx") > .4 then
        you.right = true
    end 

  if you.run then
    
     if 
         jj:getGamepadAxis("lefty") < -.58 then
        you.up = true
    elseif 
         jj:getGamepadAxis("lefty") > .58 then
        you.down = true
    end 
    
    else

     if 
         jj:getGamepadAxis("lefty") < -.5 then
        you.up = true
    elseif 
         jj:getGamepadAxis("lefty") > .5 then
        you.down = true
    end 
    end

    you.jry = jj:getGamepadAxis("righty")
    you.jrx = jj:getGamepadAxis("rightx")
    
     you.jly =jj:getGamepadAxis("lefty")
    you.jlx = jj:getGamepadAxis("leftx")

    length2 = math.abs(you.jrx/math.cos(math.atan(-you.jry/you.jrx)))


    you.a1 = false
    you.a2 = false
    you.a3 = false
    you.a4 = false
    
    
    
  
   if length2 > .8 then
     

        if (you.jry/you.jrx >= 0.45421356237
        or you.jry/you.jrx <= -0.45421356237)
        and you.jry < 0
           then
        you.a1 = true
        end

        if you.jry/you.jrx >= -1.75
        and you.jry/you.jrx <= 1.75
        and you.jrx < 0
           then
             if flip2 > 0 then
        you.a2 = true
      elseif flip2 < 0 then 
        you.a3 = true
        end
        end

        if you.jry/you.jrx >= -1.75
        and you.jry/you.jrx <= 1.75
        and you.jrx > 0
           then
        if flip2 > 0 then
        you.a3 = true
      elseif flip2 < 0 then 
        you.a2 = true
        end
        end

        if (you.jry/you.jrx >= 0.45421356237
        or you.jry/you.jrx <= -0.45421356237)
        and you.jry > 0
           then
        you.a4 = true
      end
      
      
      
end


    you.leftdeadzone = math.abs(you.jlx/math.cos(math.atan(-you.jly/you.jlx))) < .3


if not you.leftdeadzone then
youangle = math.atan(-joystick2:getGamepadAxis("lefty")/(math.abs(joystick2:getGamepadAxis("leftx"))))
else youangle = 0
end


yougupv = boltspeed*math.sin(youangle)
yougv = boltspeed*math.cos(youangle)


if ((youangle >= math.rad(0) and you.g) or not you.g) then
yougpupv = pboltspeed*math.sin(math.max(youangle, math.rad(-40)))
yougpv = pboltspeed*math.cos(math.max(youangle, math.rad(-40)))
else
yougpupv = pboltspeed*math.sin(0)
yougpv = pboltspeed*math.cos(0)

end



   





end






   me.a4 = false
    me.a1 = false
    me.a2 = false
    me.a3 = false


 
    me.jry = joystick:getGamepadAxis("righty")
    me.jrx = joystick:getGamepadAxis("rightx")
    
    
    length1 = math.abs(me.jrx/math.cos(math.atan(-me.jry/me.jrx)))

    if length1 > .8 then
      

        if (me.jry/me.jrx >= 0.45411356137
        or me.jry/me.jrx <= -0.45411356137)
        and me.jry < 0
           then
        me.a1 = true
        end

        if me.jry/me.jrx >= -1.75
        and me.jry/me.jrx <= 1.75
        and me.jrx < 0
           then
        if me.flip > 0 then
        me.a2 = true
      elseif me.flip < 0 then 
        me.a3 = true
        end
        end

        if me.jry/me.jrx >= -1.75
        and me.jry/me.jrx <= 1.75
        and me.jrx > 0
           then
        if me.flip > 0 then
        me.a3 = true
      elseif me.flip < 0 then 
        me.a2 = true
        end
        end

        if (me.jry/me.jrx >= 0.45411356137
        or me.jry/me.jrx <= -0.45411356137)
        and me.jry > 0
           then
        me.a4 = true
        end
end





    if joystick:isGamepadDown("dpleft") then
       me.left = true
    elseif joystick:isGamepadDown("dpright") then
        me.right = true
    end

    if joystick:isGamepadDown("dpup") then
       me.up = true
    elseif joystick:isGamepadDown("dpdown") then
        me.down = true
    end
 
    if joystick:isGamepadDown("a") then
        me.up = true
    end

    if joystick:isGamepadDown("x") then
        me.a1 = true
    end

    if joystick:isGamepadDown("leftshoulder") then
        me.a2 = true
    end

    if joystick:isGamepadDown("rightshoulder") then
        me.a3 = true
    end 

    if joystick:isGamepadDown("rightstick") then
        me.block = true
    end 
    
    if joystick:isGamepadDown("leftstick") then
        me.run = true
    end 
      if joystick:isGamepadDown("start") then
        me.start = true
    end 


    if joystick:getGamepadAxis("leftx") < -.4 then
        me.left = true
    elseif 
         joystick:getGamepadAxis("leftx") > .4 then
        me.right = true
    end 

    if me.run then
      
      if 
         joystick:getGamepadAxis("lefty") > .58 then
        me.down = true
    elseif joystick:getGamepadAxis("lefty") < - .58 then
        me.up = true
    end 
      
      
      else

    if 
         joystick:getGamepadAxis("lefty") > .5 then
        me.down = true
    elseif joystick:getGamepadAxis("lefty") < - .5 then
        me.up = true
    end 
    
    end

    -- if 
    --      joystick:getGamepadAxis("righty") > .4 then
    --     me.block = true
    -- end 

 

    if joystick:getGamepadAxis("triggerleft") > .5 or joystick:getGamepadAxis("triggerright") > .5 then
        me.block = true
    end
    
    
    me.jly = joystick:getGamepadAxis("lefty")
    me.jlx = joystick:getGamepadAxis("leftx")
    
   me.leftdeadzone = math.abs(me.jlx/math.cos(math.atan(-me.jly/me.jlx))) < .3
    

    
if not me.leftdeadzone then
meangle = math.atan(-joystick:getGamepadAxis("lefty")/(math.abs(joystick:getGamepadAxis("leftx"))))
else meangle = 0
end

megv = boltspeed*math.cos(meangle)







end
  

end